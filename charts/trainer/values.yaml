#
# Copyright 2024 The Kubeflow authors.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     https://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

# Default values for trainer.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# -- String to partially override release name.
nameOverride: ""

# -- String to fully override release name.
fullnameOverride: ""

# -- Common labels to add to the resources.
commonLabels: {}

image:
  # -- Image registry.
  registry: docker.io
  # -- Image repository.
  repository: kubeflow/trainer-controller-controller
  # -- Image tag.
  # @default -- If not set, the chart appVersion will be used.
  tag: latest
  # -- Image pull policy.
  pullPolicy: IfNotPresent
  # -- Image pull secrets for private image registry.
  pullSecrets: []
  # - name: <secret-name>

controller:
  # -- Number of replicas of controller.
  replicas: 1

  # -- Extra labels for controller pods.
  labels: {}
    # key1: value1
    # key2: value2

  # -- Extra annotations for controller pods.
  annotations: {}
    # key1: value1
    # key2: value2

  # -- Volumes for controller pods.
  volumes: []

  # -- Node selector for controller pods.
  nodeSelector: {}

  # -- Affinity for controller pods.
  affinity: {}

  # -- List of node taints to tolerate for controller pods.
  tolerations: []

  # -- Environment variables for controller containers.
  env: []

  # -- Environment variable sources for controller containers.
  envFrom: []

  # -- Volume mounts for controller containers.
  volumeMounts: []


  # -- Pod resource requests and limits for controller containers.
  resources: {}
    # limits:
    #   cpu: 100m
    #   memory: 300Mi
    # requests:
    #   cpu: 100m
    #   memory: 300Mi

  # -- Security context for controller containers.
  securityContext: {}
    # readOnlyRootFilesystem: true
    # privileged: false
    # allowPrivilegeEscalation: false
    # runAsNonRoot: true
    # capabilities:
    #   drop:
    #   - ALL
    # seccompProfile:
    #   type: RuntimeDefault

  serviceAccount:
    # -- Specifies whether to create a service account for the controller.
    create: true
    # -- Optional name for the controller service account.
    name: ""
    # -- Extra annotations for the controller service account.
    annotations: {}
    # -- Auto-mount service account token to the controller pods.
    automountServiceAccountToken: true

webhook:
  # -- Specifies whether to enable webhook.
  enable: true
  # -- Specifies how unrecognized errors are handled.
  # Available options are `Ignore` or `Fail`.
  failurePolicy: Fail

runtime:
  preTraining:
    torchDistributed:
      enable: true
      image:
        registry: docker.io
        repository: pytorch/pytorch
        tag: 2.5.0-cuda12.4-cudnn9-runtime
